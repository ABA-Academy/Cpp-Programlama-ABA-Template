name: Soru 10 - Fibonacci Test

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  test:
    name: Fibonacci Dizisi Testi
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Derle
      run: |
        g++ -std=c++17 -o program main.cpp
        echo "âœ… Derleme baÅŸarÄ±lÄ±"

    - name: Test 1 - Ä°lk 7 Fibonacci
      run: |
        echo "7" | ./program > output.txt
        expected="0 1 1 2 3 5 8"
        result=$(cat output.txt | tr -s '[:space:]' ' ' | xargs)

        if [ "$result" = "$expected" ]; then
          echo "âœ… Test 1 BAÅARILI: $expected"
        else
          echo "âŒ Test 1 BAÅARISIZ"
          echo "Beklenen: $expected"
          echo "Ã‡Ä±ktÄ±: $result"
          exit 1
        fi

    - name: Test 2 - Ä°lk 5 Fibonacci
      run: |
        echo "5" | ./program > output.txt
        expected="0 1 1 2 3"
        result=$(cat output.txt | tr -s '[:space:]' ' ' | xargs)

        if [ "$result" = "$expected" ]; then
          echo "âœ… Test 2 BAÅARILI: $expected"
        else
          echo "âŒ Beklenen: $expected, Ã‡Ä±ktÄ±: $result"
          exit 1
        fi

    - name: Test 3 - Ä°lk 1 Fibonacci
      run: |
        echo "1" | ./program > output.txt
        expected="0"
        result=$(cat output.txt | tr -s '[:space:]' ' ' | xargs)

        if [ "$result" = "$expected" ]; then
          echo "âœ… Test 3 BAÅARILI: $expected"
        else
          echo "âŒ Beklenen: $expected, Ã‡Ä±ktÄ±: $result"
          exit 1
        fi

    - name: Test 4 - Ä°lk 10 Fibonacci
      run: |
        echo "10" | ./program > output.txt
        expected="0 1 1 2 3 5 8 13 21 34"
        result=$(cat output.txt | tr -s '[:space:]' ' ' | xargs)

        if [ "$result" = "$expected" ]; then
          echo "âœ… Test 4 BAÅARILI: $expected"
        else
          echo "âŒ Beklenen: $expected, Ã‡Ä±ktÄ±: $result"
          exit 1
        fi

    - name: SonuÃ§
      run: echo "ğŸ‰ TÃ¼m testler baÅŸarÄ±lÄ±!"
