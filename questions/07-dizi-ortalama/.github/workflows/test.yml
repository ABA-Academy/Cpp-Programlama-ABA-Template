name: Soru 7 - Dizi OrtalamasÄ± Test

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  test:
    name: Dizi OrtalamasÄ± Testi
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Derle
      run: |
        g++ -std=c++17 -o program main.cpp
        echo "âœ… Derleme baÅŸarÄ±lÄ±"

    - name: Test 1 - Ortalama 30.00
      run: |
        echo "5
        10
        20
        30
        40
        50" | ./program > output.txt
        result=$(cat output.txt | tr -d '[:space:]')
        if [ "$result" = "30.00" ]; then
          echo "âœ… Test 1 BAÅARILI: Ortalama = 30.00"
        else
          echo "âŒ Beklenen: 30.00, Ã‡Ä±ktÄ±: $result"
          exit 1
        fi

    - name: Test 2 - Ortalama 10.00
      run: |
        echo "3
        5
        10
        15" | ./program > output.txt
        result=$(cat output.txt | tr -d '[:space:]')
        if [ "$result" = "10.00" ]; then
          echo "âœ… Test 2 BAÅARILI: Ortalama = 10.00"
        else
          echo "âŒ Beklenen: 10.00, Ã‡Ä±ktÄ±: $result"
          exit 1
        fi

    - name: Test 3 - Ortalama 2.50
      run: |
        echo "4
        1
        2
        3
        4" | ./program > output.txt
        result=$(cat output.txt | tr -d '[:space:]')
        if [ "$result" = "2.50" ]; then
          echo "âœ… Test 3 BAÅARILI: Ortalama = 2.50"
        else
          echo "âŒ Beklenen: 2.50, Ã‡Ä±ktÄ±: $result"
          exit 1
        fi

    - name: SonuÃ§
      run: echo "ğŸ‰ TÃ¼m testler baÅŸarÄ±lÄ±!"
